{"version":3,"file":"index.js","sources":["../../src/ms-browser-env/src/data/repositories/browser-name.repository.ts","../../src/ms-browser-env/src/data/repositories/device-type.repository.ts","../../src/ms-browser-env/src/data/repositories/operating-system.repository.ts","../../src/ms-browser-env/src/data/repositories/screen.repository.ts","../../src/ms-browser-env/src/domain/services/browser-env.service.ts","../../src/ms-database/src/data/repositories/database.repository.ts","../../src/ms-database/src/domain/services/database.service.ts"],"sourcesContent":["import type { IBrowserNameRegex, TBrowserName } from \"../../domain/models/browser.model\"\nimport type BrowserEnvRepositoryContract from \"../../domain/contracts/repository.contract\"\n\nexport default class BrowserNameRepository implements BrowserEnvRepositoryContract<TBrowserName> {\n\tconstructor(\n\t\tprivate readonly browserNames: Array<IBrowserNameRegex> = [\n\t\t\t{ name: \"Chrome\", regex: /chrome|chromium|crios/i },\n\t\t\t{ name: \"Firefox\", regex: /firefox|fxios/i },\n\t\t\t{ name: \"Safari\", regex: /safari/i },\n\t\t\t{ name: \"Opera\", regex: /opr\\//i },\n\t\t\t{ name: \"Edge\", regex: /edg/i },\n\t\t],\n\t) { }\n\n\tpublic get() {\n\t\tconst userAgent = window.navigator.userAgent\n\n\t\tif (!userAgent) return null\n\n\t\tfor (const id in this.browserNames) {\n\t\t\tconst system = this.browserNames[id]\n\n\t\t\tif (system.regex.test(userAgent)) {\n\t\t\t\treturn system.name\n\t\t\t}\n\t\t}\n\n\t\treturn null\n\t}\n}\n","import type BrowserEnvRepositoryContract from \"../../domain/contracts/repository.contract\"\nimport { IDevicesRegex, TDevices } from \"../../domain/models/device.model\"\n\nexport default class DeviceTypeRepository implements BrowserEnvRepositoryContract<TDevices> {\n\tconstructor(\n\t\tprivate readonly devicesNames: Array<IDevicesRegex> = [\n\t\t\t{\n\t\t\t\tname: \"mobile\",\n\t\t\t\tregex: /iphone|ipad|ipod|android|blackberry|opera mini|iemobile/i,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"desktop\",\n\t\t\t\tregex: /Win|Windows|OpenBSD|SunOS|Linux|X11|Mac|Mac OS X/i,\n\t\t\t},\n\t\t]\n\t) { }\n\n\tpublic get() {\n\t\tconst userAgent = window.navigator.userAgent\n\n\t\tif (!userAgent) return null\n\n\t\tfor (const id in this.devicesNames) {\n\t\t\tconst system = this.devicesNames[id]\n\n\t\t\tif (system.regex.test(userAgent)) {\n\t\t\t\treturn system.name\n\t\t\t}\n\t\t}\n\n\t\treturn null\n\t}\n}\n","import type BrowserEnvRepositoryContract from \"../../domain/contracts/repository.contract\"\nimport type { IOperatingSystemRegex, TOperatingSystemAll } from \"../../domain/models/operating.model\"\n\nexport default class OperatingSystemRepository implements BrowserEnvRepositoryContract<TOperatingSystemAll> {\n\tconstructor(\n\t\tprivate readonly operatingSystems: Array<IOperatingSystemRegex> = [\n\t\t\t{ name: \"Windows 3.11\", regex: /Win16/ },\n\t\t\t{ name: \"Windows 95\", regex: /(Windows 95|Win95|Windows_95)/ },\n\t\t\t{ name: \"Windows ME\", regex: /(Win 9x 4.90|Windows ME)/ },\n\t\t\t{ name: \"Windows 98\", regex: /(Windows 98|Win98)/ },\n\t\t\t{ name: \"Windows CE\", regex: /Windows CE/ },\n\t\t\t{ name: \"Windows 2000\", regex: /(Windows NT 5.0|Windows 2000)/ },\n\t\t\t{ name: \"Windows XP\", regex: /(Windows NT 5.1|Windows XP)/ },\n\t\t\t{ name: \"Windows Server 2003\", regex: /Windows NT 5.2/ },\n\t\t\t{ name: \"Windows Vista\", regex: /Windows NT 6.0/ },\n\t\t\t{ name: \"Windows 7\", regex: /(Windows 7|Windows NT 6.1)/ },\n\t\t\t{ name: \"Windows 8.1\", regex: /(Windows 8.1|Windows NT 6.3)/ },\n\t\t\t{ name: \"Windows 8\", regex: /(Windows 8|Windows NT 6.2)/ },\n\t\t\t{\n\t\t\t\tname: \"Windows NT 4.0\",\n\t\t\t\tregex: /(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/,\n\t\t\t},\n\t\t\t{ name: \"Windows ME\", regex: /Windows ME/ },\n\t\t\t{ name: \"Android\", regex: /Android/ },\n\t\t\t{ name: \"Open BSD\", regex: /OpenBSD/ },\n\t\t\t{ name: \"Sun OS\", regex: /SunOS/ },\n\t\t\t{ name: \"Linux\", regex: /(Linux|X11)/ },\n\t\t\t{ name: \"iOS\", regex: /(iPhone|iPad|iPod)/ },\n\t\t\t{ name: \"Mac OS X\", regex: /Mac OS X/ },\n\t\t\t{ name: \"Mac OS\", regex: /(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/ },\n\t\t\t{ name: \"QNX\", regex: /QNX/ },\n\t\t\t{ name: \"UNIX\", regex: /UNIX/ },\n\t\t\t{ name: \"BeOS\", regex: /BeOS/ },\n\t\t\t{ name: \"OS/2\", regex: /OS\\/2/ },\n\t\t]\n\t) { }\n\n\tpublic get() {\n\t\tconst userAgent = window.navigator.userAgent\n\n\t\tif (!userAgent) return null\n\n\t\tfor (const id in this.operatingSystems) {\n\t\t\tconst system = this.operatingSystems[id]\n\n\t\t\tif (system.regex.test(userAgent)) {\n\t\t\t\treturn system.name\n\t\t\t}\n\t\t}\n\n\t\treturn null\n\t}\n}\n","import type BrowserEnvRepositoryContract from \"../../domain/contracts/repository.contract\"\nimport type { IScreenInformation } from \"../../domain/models/screen.model\"\n\nexport default class ScreenRepository implements BrowserEnvRepositoryContract<IScreenInformation> {\n\tpublic get() {\n\t\tconst windowScreen = window.screen\n\n\t\tif (!windowScreen) return null\n\n\t\treturn {\n\t\t\tcolorDepth: windowScreen.colorDepth,\n\t\t\theight: windowScreen.height,\n\t\t\twidth: windowScreen.width\n\t\t}\n\t}\n}\n","import type BrowserEnvServiceContract from \"../contracts/service.contract\"\nimport BrowserNameRepository from \"../../data/repositories/browser-name.repository\"\nimport DeviceTypeRepository from \"../../data/repositories/device-type.repository\"\nimport OperatingSystemRepository from \"../../data/repositories/operating-system.repository\"\nimport ScreenRepository from \"../../data/repositories/screen.repository\"\n\nexport default class BrowserEnvService implements BrowserEnvServiceContract {\n\tconstructor(\n\t\tprivate readonly browserNameRepository = new BrowserNameRepository(),\n\t\tprivate readonly deviceTypeRepository = new DeviceTypeRepository(),\n\t\tprivate readonly operatingSystemRepository = new OperatingSystemRepository(),\n\t\tprivate readonly screenRepository = new ScreenRepository(),\n\t) { }\n\n\tpublic getBrowserName() {\n\t\treturn this.browserNameRepository.get()\n\t}\n\n\tpublic getDeviceType() {\n\t\treturn this.deviceTypeRepository.get()\n\t}\n\n\tpublic getOperatingSystem() {\n\t\treturn this.operatingSystemRepository.get()\n\t}\n\n\tpublic getScreenInformation() {\n\t\treturn this.screenRepository.get()\n\t}\n}\n","import type { Maybe } from \"@windows98/toolkit/src/types\"\nimport type { DatabaseRepositoryContract } from \"../../domain/contracts/repository.contract\"\n\nexport class DatabaseRepository implements DatabaseRepositoryContract {\n\tprivate database: Maybe<IDBDatabase> = null\n\n\tconstructor(\n\t\tprivate databaseName: string,\n\t\tprivate storeName: string\n\t) { }\n\n\tpublic async open(): Promise<void> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst request = window.indexedDB.open(this.databaseName)\n\n\t\t\trequest.onerror = () => reject(request.error)\n\t\t\trequest.onsuccess = () => {\n\t\t\t\tthis.database = request.result\n\t\t\t\tresolve()\n\t\t\t}\n\t\t\trequest.onupgradeneeded = (event) => {\n\t\t\t\tthis.database = (event.target as IDBOpenDBRequest).result\n\t\t\t\tthis.database.createObjectStore(this.storeName)\n\t\t\t}\n\t\t})\n\t}\n\n\tpublic async add<T>(item: T): Promise<void> {\n\t\tthis.getStore(\"readwrite\").add(item)\n\t}\n\n\tpublic async get<T>(key: IDBValidKey): Promise<IDBRequest<T>> {\n\t\treturn this.getStore(\"readonly\").get(key)\n\t}\n\n\tpublic async update<T>(key: IDBValidKey, item: T): Promise<void> {\n\t\tthis.getStore(\"readwrite\").put(item, key)\n\t}\n\n\tpublic async delete(key: IDBValidKey): Promise<void> {\n\t\tthis.getStore(\"readwrite\").delete(key)\n\t}\n\n\tprivate getStore(mode: IDBTransactionMode): IDBObjectStore {\n\t\tif (!this.database) {\n\t\t\tthrow new Error(\"Database not open\")\n\t\t}\n\n\t\tconst transaction: IDBTransaction = this.database.transaction(this.storeName, mode)\n\t\treturn transaction.objectStore(this.storeName)\n\t}\n}\n","import { DatabaseRepository } from \"../../data/repositories/database.repository\"\nimport type { DatabaseServiceContract } from \"../contracts/service.contract\"\n\nexport default class DatabaseService implements DatabaseServiceContract {\n\tprivate readonly databaseRepository: DatabaseRepository\n\n\tconstructor(\n\t\tpublic readonly databaseName: string,\n\t\tpublic readonly storeName: string\n\t) {\n\t\tthis.databaseRepository = new DatabaseRepository(this.databaseName, this.storeName)\n\t}\n\n\tasync open(): Promise<void> {\n\t\treturn this.databaseRepository.open()\n\t}\n\n\tpublic async add<T>(item: T): Promise<void> {\n\t\treturn this.databaseRepository.add(item)\n\t}\n\n\tpublic async get<T>(key: IDBValidKey): Promise<IDBRequest<T>> {\n\t\treturn this.databaseRepository.get(key)\n\t}\n\n\tpublic async update<T>(key: IDBValidKey, item: T): Promise<void> {\n\t\treturn this.databaseRepository.update(key, item)\n\t}\n\n\tpublic async delete(key: IDBValidKey): Promise<void> {\n\t\treturn this.databaseRepository.delete(key)\n\t}\n}\n"],"names":["BrowserNameRepository","browserNames","userAgent","id","system","DeviceTypeRepository","devicesNames","OperatingSystemRepository","operatingSystems","ScreenRepository","windowScreen","BrowserEnvService","browserNameRepository","deviceTypeRepository","operatingSystemRepository","screenRepository","DatabaseRepository","databaseName","storeName","__publicField","resolve","reject","request","event","item","key","mode","DatabaseService"],"mappings":";;;AAGA,MAAqBA,EAA4E;AAAA,EAChG,YACkBC,IAAyC;AAAA,IACzD,EAAE,MAAM,UAAU,OAAO,yBAAyB;AAAA,IAClD,EAAE,MAAM,WAAW,OAAO,iBAAiB;AAAA,IAC3C,EAAE,MAAM,UAAU,OAAO,UAAU;AAAA,IACnC,EAAE,MAAM,SAAS,OAAO,SAAS;AAAA,IACjC,EAAE,MAAM,QAAQ,OAAO,OAAO;AAAA,EAAA,GAE9B;AAPgB,SAAA,eAAAA;AAAA,EAOd;AAAA,EAEG,MAAM;AACN,UAAAC,IAAY,OAAO,UAAU;AAEnC,QAAI,CAACA;AAAkB,aAAA;AAEZ,eAAAC,KAAM,KAAK,cAAc;AAC7B,YAAAC,IAAS,KAAK,aAAaD,CAAE;AAEnC,UAAIC,EAAO,MAAM,KAAKF,CAAS;AAC9B,eAAOE,EAAO;AAAA,IAEhB;AAEO,WAAA;AAAA,EACR;AACD;AC1BA,MAAqBC,EAAuE;AAAA,EAC3F,YACkBC,IAAqC;AAAA,IACrD;AAAA,MACC,MAAM;AAAA,MACN,OAAO;AAAA,IACR;AAAA,IACA;AAAA,MACC,MAAM;AAAA,MACN,OAAO;AAAA,IACR;AAAA,EAAA,GAEA;AAVgB,SAAA,eAAAA;AAAA,EAUd;AAAA,EAEG,MAAM;AACN,UAAAJ,IAAY,OAAO,UAAU;AAEnC,QAAI,CAACA;AAAkB,aAAA;AAEZ,eAAAC,KAAM,KAAK,cAAc;AAC7B,YAAAC,IAAS,KAAK,aAAaD,CAAE;AAEnC,UAAIC,EAAO,MAAM,KAAKF,CAAS;AAC9B,eAAOE,EAAO;AAAA,IAEhB;AAEO,WAAA;AAAA,EACR;AACD;AC7BA,MAAqBG,EAAuF;AAAA,EAC3G,YACkBC,IAAiD;AAAA,IACjE,EAAE,MAAM,gBAAgB,OAAO,QAAQ;AAAA,IACvC,EAAE,MAAM,cAAc,OAAO,gCAAgC;AAAA,IAC7D,EAAE,MAAM,cAAc,OAAO,2BAA2B;AAAA,IACxD,EAAE,MAAM,cAAc,OAAO,qBAAqB;AAAA,IAClD,EAAE,MAAM,cAAc,OAAO,aAAa;AAAA,IAC1C,EAAE,MAAM,gBAAgB,OAAO,gCAAgC;AAAA,IAC/D,EAAE,MAAM,cAAc,OAAO,8BAA8B;AAAA,IAC3D,EAAE,MAAM,uBAAuB,OAAO,iBAAiB;AAAA,IACvD,EAAE,MAAM,iBAAiB,OAAO,iBAAiB;AAAA,IACjD,EAAE,MAAM,aAAa,OAAO,6BAA6B;AAAA,IACzD,EAAE,MAAM,eAAe,OAAO,+BAA+B;AAAA,IAC7D,EAAE,MAAM,aAAa,OAAO,6BAA6B;AAAA,IACzD;AAAA,MACC,MAAM;AAAA,MACN,OAAO;AAAA,IACR;AAAA,IACA,EAAE,MAAM,cAAc,OAAO,aAAa;AAAA,IAC1C,EAAE,MAAM,WAAW,OAAO,UAAU;AAAA,IACpC,EAAE,MAAM,YAAY,OAAO,UAAU;AAAA,IACrC,EAAE,MAAM,UAAU,OAAO,QAAQ;AAAA,IACjC,EAAE,MAAM,SAAS,OAAO,cAAc;AAAA,IACtC,EAAE,MAAM,OAAO,OAAO,qBAAqB;AAAA,IAC3C,EAAE,MAAM,YAAY,OAAO,WAAW;AAAA,IACtC,EAAE,MAAM,UAAU,OAAO,0CAA0C;AAAA,IACnE,EAAE,MAAM,OAAO,OAAO,MAAM;AAAA,IAC5B,EAAE,MAAM,QAAQ,OAAO,OAAO;AAAA,IAC9B,EAAE,MAAM,QAAQ,OAAO,OAAO;AAAA,IAC9B,EAAE,MAAM,QAAQ,OAAO,QAAQ;AAAA,EAAA,GAE/B;AA9BgB,SAAA,mBAAAA;AAAA,EA8Bd;AAAA,EAEG,MAAM;AACN,UAAAN,IAAY,OAAO,UAAU;AAEnC,QAAI,CAACA;AAAkB,aAAA;AAEZ,eAAAC,KAAM,KAAK,kBAAkB;AACjC,YAAAC,IAAS,KAAK,iBAAiBD,CAAE;AAEvC,UAAIC,EAAO,MAAM,KAAKF,CAAS;AAC9B,eAAOE,EAAO;AAAA,IAEhB;AAEO,WAAA;AAAA,EACR;AACD;ACjDA,MAAqBK,EAA6E;AAAA,EAC1F,MAAM;AACZ,UAAMC,IAAe,OAAO;AAE5B,WAAKA,IAEE;AAAA,MACN,YAAYA,EAAa;AAAA,MACzB,QAAQA,EAAa;AAAA,MACrB,OAAOA,EAAa;AAAA,IAAA,IALK;AAAA,EAO3B;AACD;ACTA,MAAqBC,EAAuD;AAAA,EAC3E,YACkBC,IAAwB,IAAIZ,EAAsB,GAClDa,IAAuB,IAAIR,KAC3BS,IAA4B,IAAIP,EAA0B,GAC1DQ,IAAmB,IAAIN,KACvC;AAJgB,SAAA,wBAAAG,GACA,KAAA,uBAAAC,GACA,KAAA,4BAAAC,GACA,KAAA,mBAAAC;AAAA,EACd;AAAA,EAEG,iBAAiB;AAChB,WAAA,KAAK,sBAAsB;EACnC;AAAA,EAEO,gBAAgB;AACf,WAAA,KAAK,qBAAqB;EAClC;AAAA,EAEO,qBAAqB;AACpB,WAAA,KAAK,0BAA0B;EACvC;AAAA,EAEO,uBAAuB;AACtB,WAAA,KAAK,iBAAiB;EAC9B;AACD;AC1BO,MAAMC,EAAyD;AAAA,EAGrE,YACSC,GACAC,GACP;AALM,IAAAC,EAAA,kBAA+B;AAG9B,SAAA,eAAAF,GACA,KAAA,YAAAC;AAAA,EACL;AAAA,EAEJ,MAAa,OAAsB;AAClC,WAAO,IAAI,QAAQ,CAACE,GAASC,MAAW;AACvC,YAAMC,IAAU,OAAO,UAAU,KAAK,KAAK,YAAY;AAEvD,MAAAA,EAAQ,UAAU,MAAMD,EAAOC,EAAQ,KAAK,GAC5CA,EAAQ,YAAY,MAAM;AACzB,aAAK,WAAWA,EAAQ,QAChBF;MAAA,GAEDE,EAAA,kBAAkB,CAACC,MAAU;AAC/B,aAAA,WAAYA,EAAM,OAA4B,QAC9C,KAAA,SAAS,kBAAkB,KAAK,SAAS;AAAA,MAAA;AAAA,IAC/C,CACA;AAAA,EACF;AAAA,EAEA,MAAa,IAAOC,GAAwB;AAC3C,SAAK,SAAS,WAAW,EAAE,IAAIA,CAAI;AAAA,EACpC;AAAA,EAEA,MAAa,IAAOC,GAA0C;AAC7D,WAAO,KAAK,SAAS,UAAU,EAAE,IAAIA,CAAG;AAAA,EACzC;AAAA,EAEA,MAAa,OAAUA,GAAkBD,GAAwB;AAChE,SAAK,SAAS,WAAW,EAAE,IAAIA,GAAMC,CAAG;AAAA,EACzC;AAAA,EAEA,MAAa,OAAOA,GAAiC;AACpD,SAAK,SAAS,WAAW,EAAE,OAAOA,CAAG;AAAA,EACtC;AAAA,EAEQ,SAASC,GAA0C;AACtD,QAAA,CAAC,KAAK;AACH,YAAA,IAAI,MAAM,mBAAmB;AAI7B,WAD6B,KAAK,SAAS,YAAY,KAAK,WAAWA,CAAI,EAC/D,YAAY,KAAK,SAAS;AAAA,EAC9C;AACD;AChDA,MAAqBC,EAAmD;AAAA,EAGvE,YACiBV,GACAC,GACf;AALe,IAAAC,EAAA;AAGA,SAAA,eAAAF,GACA,KAAA,YAAAC,GAEhB,KAAK,qBAAqB,IAAIF,EAAmB,KAAK,cAAc,KAAK,SAAS;AAAA,EACnF;AAAA,EAEA,MAAM,OAAsB;AACpB,WAAA,KAAK,mBAAmB;EAChC;AAAA,EAEA,MAAa,IAAOQ,GAAwB;AACpC,WAAA,KAAK,mBAAmB,IAAIA,CAAI;AAAA,EACxC;AAAA,EAEA,MAAa,IAAOC,GAA0C;AACtD,WAAA,KAAK,mBAAmB,IAAIA,CAAG;AAAA,EACvC;AAAA,EAEA,MAAa,OAAUA,GAAkBD,GAAwB;AAChE,WAAO,KAAK,mBAAmB,OAAOC,GAAKD,CAAI;AAAA,EAChD;AAAA,EAEA,MAAa,OAAOC,GAAiC;AAC7C,WAAA,KAAK,mBAAmB,OAAOA,CAAG;AAAA,EAC1C;AACD;"}