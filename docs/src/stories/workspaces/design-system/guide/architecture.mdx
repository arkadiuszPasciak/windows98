import { Meta, Title } from "@storybook/addon-docs/blocks";

<Meta title="Workspaces/Design System/Guide/Architecture" />

<Title>ğŸ—ï¸ Architecture</Title>

The Windows98 design system follows a modular, component-based architecture that promotes consistency, reusability, and maintainability across the entire Windows98 application ecosystem.

## Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                @windows98/design-system                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   Build Process                        â”‚  â”‚
â”‚  â”‚  Components + Styles â†’ Bundle â†’ Distribution           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â”‚                                â”‚
â”‚                             â–¼                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Components    â”‚  â”‚     Styles      â”‚  â”‚    Assets    â”‚  â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚              â”‚  â”‚
â”‚  â”‚ â€¢ ds-button     â”‚  â”‚ â€¢ Variables     â”‚  â”‚ â€¢ Fonts      â”‚  â”‚
â”‚  â”‚ â€¢ ds-input      â”‚  â”‚ â€¢ Themes        â”‚  â”‚ â€¢ Icons      â”‚  â”‚
â”‚  â”‚ â€¢ ds-modal      â”‚  â”‚ â€¢ Base Styles   â”‚  â”‚ â€¢ Favicon    â”‚  â”‚
â”‚  â”‚ â€¢ ds-frame      â”‚  â”‚ â€¢ Resets        â”‚  â”‚              â”‚  â”‚
â”‚  â”‚ â€¢ ds-tabs       â”‚  â”‚ â€¢ Typography    â”‚  â”‚              â”‚  â”‚
â”‚  â”‚ â€¢ more...       â”‚  â”‚                 â”‚  â”‚              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                    â”‚                    â”‚        â”‚
â”‚           â–¼                    â–¼                    â–¼        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   TypeScript    â”‚  â”‚   CSS Modules   â”‚  â”‚    Utils     â”‚  â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚              â”‚  â”‚
â”‚  â”‚ â€¢ Props Types   â”‚  â”‚ â€¢ Scoped Styles â”‚  â”‚ â€¢ Helpers    â”‚  â”‚
â”‚  â”‚ â€¢ Interfaces    â”‚  â”‚ â€¢ Theme Support â”‚  â”‚ â€¢ Constants  â”‚  â”‚
â”‚  â”‚ â€¢ Enums         â”‚  â”‚ â€¢ Responsive    â”‚  â”‚ â€¢ Validators â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Core Architecture Principles

### 1. Modular Design System

The design system is built with modularity at its core:
- Independent component packages
- Separated concerns (components, styles, tokens)
- Clear boundaries between layers
- Pluggable theme system

### 2. Design Token System

Centralized design tokens provide consistency across all components:

```css
/* Base tokens */
:root {
  --ds-spacing-md: 0.625rem;
  --ds-font-size-md: 1.25rem;
  --ds-border-radius-sm: 2px;
}

/* Semantic tokens */
:root[theme="light"] {
  --ds-background-color-primary: var(--ds-color-grey800);
  --ds-text-color-primary: var(--ds-color-black300);
}
```

### 3. Theme Architecture

Multi-theme support through CSS custom properties:

```css
/* Theme switching via HTML attribute */
:root[theme="light"] { /* light theme variables */ }
:root[theme="dark"]  { /* dark theme variables */ }
```

## Testing Architecture

### Testing Strategy

The design system employs a comprehensive testing approach:

1. **Unit Testing** - Component functionality and props
2. **Integration Testing** - Component interaction and behavior  
3. **Visual Testing** - UI consistency and theme support
4. **Accessibility Testing** - WCAG compliance and screen readers

### Testing Tools

- **Vitest** - Unit and integration testing
- **Playwright** - End-to-end and visual testing
- **Testing Library** - React component testing utilities
- **Axe** - Accessibility testing

## File Organization

### Source Structure

```
src/
â”œâ”€â”€ components/          # All UI components
â”‚   â”œâ”€â”€ ds-button/
â”‚   â”œâ”€â”€ ds-input/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ styles/             # Global styles and themes
â”‚   â”œâ”€â”€ variables.css   # Design tokens
â”‚   â”œâ”€â”€ theme-light.css # Light theme
â”‚   â”œâ”€â”€ theme-dark.css  # Dark theme
â”‚   â””â”€â”€ index.css       # Main stylesheet
â”œâ”€â”€ types/              # Shared TypeScript types
â”œâ”€â”€ utils/              # Utility functions
â”œâ”€â”€ fonts/              # Windows 98 fonts
â”œâ”€â”€ favicon/            # Favicon assets
â””â”€â”€ index.ts            # Main export file
```

## Package Distribution

### Built Artifacts

The build process generates multiple distribution formats:

```
@bundler/build/
â”œâ”€â”€ index.js              # ES Module bundle
â”œâ”€â”€ index.umd.cjs         # UMD bundle
â”œâ”€â”€ index.d.ts            # TypeScript definitions
â”œâ”€â”€ styles/
â”‚   â””â”€â”€ index.css         # Compiled CSS bundle
â””â”€â”€ components/           # Individual component builds
    â”œâ”€â”€ ds-button/
    â””â”€â”€ ...
```

### Package Entry Points

Multiple entry points support different import patterns:

```javascript
// Main component imports
import { DSButton } from '@windows98/design-system'

// CSS import
import '@windows98/design-system/index.css'

// Type imports
import type { DSButtonProps } from '@windows98/design-system'
```
