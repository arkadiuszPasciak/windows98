import { Meta, Title } from "@storybook/addon-docs/blocks";

<Meta title="Workspaces/Micro Services/Services/MSEventBus" />

<Title>ðŸ“¡ MS Event Bus</Title>

Inter-component communication service for Windows98 ecosystem.

## What is MS Event Bus?

MS Event Bus is a centralized communication service that enables decoupled messaging between different components, services, and micro-frontends in the Windows98 environment. It provides a pub/sub pattern implementation for efficient and organized event-driven architecture.

## Key Features

### ðŸ“¨ **Event Publishing**
- Event emission and broadcasting
- Event payload management
- Namespace and channel support
- Priority-based event handling

### ðŸ‘‚ **Event Subscription**
- Event listener registration
- Pattern-based event matching
- One-time and persistent subscriptions
- Subscription lifecycle management

### ðŸ”§ **Event Management**
- Event queuing and buffering
- Event filtering and routing
- Event replay and history
- Conditional event processing

### ðŸŽ¯ **Targeted Messaging**
- Component-to-component messaging
- Service-to-service communication
- Micro-frontend coordination
- Cross-frame messaging support

### ðŸš€ **Performance Optimization**
- Asynchronous event processing
- Event batching and throttling
- Memory-efficient subscription handling
- Lazy event evaluation

### ðŸ”’ **Security & Validation**
- Event payload validation
- Subscription access control
- Event source verification
- Secure cross-origin messaging

### ðŸ“Š **Debugging & Monitoring**
- Event flow visualization
- Performance metrics tracking
- Event debugging tools
- Subscription monitoring

### ðŸŽ¨ **Windows98 Integration**
- System-wide event coordination
- Window message integration
- Desktop event handling
- Application lifecycle events

## Integration Example

```tsx
import { MSEventBus } from '@windows98/micro-services'

const eventBus = new MSEventBus()

// Subscribe to events
eventBus.on('theme-changed', (newTheme) => {
  console.log(`Theme changed to: ${newTheme}`)
  updateAppTheme(newTheme)
})

// Subscribe with options
eventBus.on('file-saved', (fileData) => {
  showNotification('File saved successfully')
}, { 
  once: true,
  priority: 'high'
})

// Emit events
eventBus.emit('theme-changed', 'dark')
eventBus.emit('file-operation', {
  type: 'save',
  filename: 'document.txt',
  success: true
})

// Pattern-based subscriptions
eventBus.onPattern('window:*', (event, data) => {
  console.log(`Window event: ${event}`, data)
})

// Namespace events
eventBus.on('calculator:result', handleCalculatorResult)
eventBus.emit('calculator:result', { value: 42 })

// Remove subscriptions
const unsubscribe = eventBus.on('user-action', handleUserAction)
unsubscribe() // Remove listener
```

## Common Use Cases

- **Component Communication**: Enabling loose coupling between UI components
- **Service Coordination**: Coordinating actions between different services
- **State Synchronization**: Keeping multiple components in sync with shared state
- **System Events**: Broadcasting system-wide events and notifications
- **Plugin Communication**: Enabling communication between plugins and extensions
- **Micro-frontend Integration**: Coordinating between different micro-frontend applications